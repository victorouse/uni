!function(a){"use strict";var b=navigator.appVersion.indexOf("Mac")>-1,c=navigator.userAgent.indexOf("MSIE")>-1,d=navigator.userAgent.indexOf("Firefox")>-1,e=function(){var a=function(a){return function(b){return a===b}},b=function(a,b){return a===b},c=function(){return!1},d=function(a){return function(){return!a.apply(a,arguments)}},e=function(a){return a};return{eq:a,eq2:b,fail:c,not:d,self:e}}(),f=function(){var a=function(a){return a[0]},b=function(a){return a[a.length-1]},c=function(a){return a.slice(0,a.length-1)},d=function(a){return a.slice(1)},f=function(a,b){return b=b||e.self,a.reduce(function(a,c){return a+b(c)},0)},g=function(a){for(var b=[],c=-1,d=a.length;++c<d;)b[c]=a[c];return b},h=function(c,e){if(0===c.length)return[];var f=d(c);return f.reduce(function(a,c){var d=b(a);return e(b(d),c)?d[d.length]=c:a[a.length]=[c],a},[[a(c)]])},i=function(a){for(var b=[],c=0,d=a.length;d>c;c++)a[c]&&b.push(a[c]);return b};return{head:a,last:b,initial:c,tail:d,sum:f,from:g,compact:i,clusterBy:h}}(),g=function(){var b=function(b){var c=new FileReader,d=a.Deferred();return c.onload=function(a){d.resolve(a.target.result)},c.onerror=function(){d.reject(this)},c.readAsDataURL(b),d.promise()};return{readFile:b}}(),h=function(){var b=function(a){return function(b){return b&&b.nodeName===a}},c=function(a){return a&&/^P|^LI|^H[1-7]/.test(a.nodeName)},d=function(a){return a&&/^UL|^OL/.test(a.nodeName)},g=function(b){return b&&a(b).hasClass("note-editable")},i=function(b){return b&&a(b).hasClass("note-control-sizing")},j=function(a,b){for(;a;){if(b(a))return a;a=a.parentNode}return null},k=function(a,b){b=b||e.fail;var c=[];return j(a,function(a){return c.push(a),b(a)}),c},l=function(b,c){for(var d=k(b),e=c;e;e=e.parentNode)if(a.inArray(e,d)>-1)return e;return null},m=function(a,b){var c=[],d=!1,e=!1,f=function(g){if(g){if(g===a&&(d=!0),d&&!e&&c.push(g),g===b)return e=!0,void 0;for(var h=0,i=g.childNodes.length;i>h;h++)f(g.childNodes[h])}};return f(l(a,b)),c},n=function(a,b){b=b||e.fail;for(var c=[];a&&(c.push(a),!b(a));)a=a.previousSibling;return c},o=function(a,b){b=b||e.fail;for(var c=[];a&&(c.push(a),!b(a));)a=a.nextSibling;return c},p=function(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a},q=function(b,c){return a.each(c,function(a,c){b.appendChild(c)}),b},r=b("#text"),s=function(a){return r(a)?a.nodeValue.length:a.childNodes.length},t=function(a){for(var b=0;a=a.previousSibling;)b+=1;return b},u=function(b,c){var d=f.initial(k(c,e.eq(b)));return a.map(d,t).reverse()},v=function(a,b){for(var c=a,d=0,e=b.length;e>d;d++)c=c.childNodes[b[d]];return c},w=function(a,b){if(0===b)return a;if(b>=s(a))return a.nextSibling;if(r(a))return a.splitText(b);var c=a.childNodes[b];return a=p(a.cloneNode(!1),a),q(a,o(c))},x=function(a,b,c){var d=k(b,e.eq(a));return 1===d.length?w(b,c):d.reduce(function(a,d){var e=d.cloneNode(!1);return p(e,d),a===b&&(a=w(a,c)),q(e,o(a)),e})},y=function(a,b){if(a&&a.parentNode){if(a.removeNode)return a.removeNode(b);var c=a.parentNode;if(!b){for(var d=[],e=0,f=a.childNodes.length;f>e;e++)d.push(a.childNodes[e]);for(var e=0,f=d.length;f>e;e++)c.insertBefore(d[e],a)}c.removeChild(a)}},z=function(b){return a("<div/>").html(b).text()},A=function(a){return h.isTextarea(a[0])?z(a.val()):a.html()};return{isText:r,isPara:c,isList:d,isEditable:g,isControlSizing:i,isAnchor:b("A"),isDiv:b("DIV"),isSpan:b("SPAN"),isB:b("B"),isU:b("U"),isS:b("S"),isI:b("I"),isImg:b("IMG"),isTextarea:b("TEXTAREA"),ancestor:j,listAncestor:k,listNext:o,listPrev:n,commonAncestor:l,listBetween:m,insertAfter:p,position:t,makeOffsetPath:u,fromOffsetPath:v,split:x,remove:y,html:A}}(),i=function(){var b=!!document.createRange,c=function(a,b){var c,d,e=a.parentElement(),g=document.body.createTextRange(),i=f.from(e.childNodes);for(c=0;c<i.length;c++)if(!h.isText(i[c])){if(g.moveToElementText(i[c]),g.compareEndPoints("StartToStart",a)>=0)break;d=i[c]}if(0!==c&&h.isText(i[c-1])){var j=document.body.createTextRange(),k=null;j.moveToElementText(d||e),j.collapse(!d),k=d?d.nextSibling:e.firstChild;var l=a.duplicate();l.setEndPoint("StartToStart",j);for(var m=l.text.replace(/[\r\n]/g,"").length;m>k.nodeValue.length&&k.nextSibling;)m-=k.nodeValue.length,k=k.nextSibling;k.nodeValue,b&&k.nextSibling&&h.isText(k.nextSibling)&&m==k.nodeValue.length&&(m-=k.nodeValue.length,k=k.nextSibling),e=k,c=m}return{cont:e,offset:c}},d=function(a){var b=function(a,c){var d,g;if(h.isText(a)){var i=h.listPrev(a,e.not(h.isText)),j=f.last(i).previousSibling;d=j||a.parentNode,c+=f.sum(f.tail(i),h.length),g=!j}else{if(d=a.childNodes[c]||a,h.isText(d))return b(d,c);c=0,g=!1}return{cont:d,collapseToStart:g,offset:c}},c=document.body.createTextRange(),d=b(a.cont,a.offset);return c.moveToElementText(d.cont),c.collapse(d.collapseToStart),c.moveStart("character",d.offset),c},g=function(c,g,i,j){this.sc=c,this.so=g,this.ec=i,this.eo=j;var k=function(){if(b){var a=document.createRange();return a.setStart(c,g),a.setEnd(i,j),a}var e=d({cont:c,offset:g});return e.setEndPoint("EndToEnd",d({cont:i,offset:j})),e};this.select=function(){var a=k();if(b){var c=document.getSelection();c.rangeCount>0&&c.removeAllRanges(),c.addRange(a)}else a.select()},this.listPara=function(){var b=h.listBetween(c,i),d=f.compact(a.map(b,function(a){return h.ancestor(a,h.isPara)}));return a.map(f.clusterBy(d,e.eq2),f.head)};var l=function(a){return function(){var b=h.ancestor(c,a);return b&&b===h.ancestor(i,a)}};this.isOnEditable=l(h.isEditable),this.isOnList=l(h.isList),this.isOnAnchor=l(h.isAnchor),this.isCollapsed=function(){return c===i&&g===j},this.insertNode=function(a){var c=k();b?c.insertNode(a):c.pasteHTML(a.outerHTML)},this.toString=function(){var a=k();return b?a.toString():a.text},this.bookmark=function(a){return{s:{path:h.makeOffsetPath(a,c),offset:g},e:{path:h.makeOffsetPath(a,i),offset:j}}}};return{create:function(a,d,e,f){if(0===arguments.length)if(b){var h=document.getSelection();if(0===h.rangeCount)return null;var i=h.getRangeAt(0);a=i.startContainer,d=i.startOffset,e=i.endContainer,f=i.endOffset}else{var j=document.selection.createRange(),k=j.duplicate();k.collapse(!1);var l=j;l.collapse(!0);var m=c(l,!0),n=c(k,!1);a=m.cont,d=m.offset,e=n.cont,f=n.offset}else 2===arguments.length&&(e=a,f=d);return new g(a,d,e,f)},createFromBookmark:function(a,b){var c=h.fromOffsetPath(a,b.s.path),d=b.s.offset,e=h.fromOffsetPath(a,b.e.path),f=b.e.offset;return new g(c,d,e,f)}}}(),j=function(){this.stylePara=function(b,c){var d=b.listPara();a.each(d,function(b,d){a.each(c,function(a,b){d.style[a]=b})})},this.current=function(b,c){var d=a(h.isText(b.sc)?b.sc.parentNode:b.sc),e=d.css(["font-size","text-align","list-style-type","line-height"])||{};if(e["font-size"]=parseInt(e["font-size"]),e["font-bold"]=document.queryCommandState("bold")?"bold":"normal",e["font-italic"]=document.queryCommandState("italic")?"italic":"normal",e["font-underline"]=document.queryCommandState("underline")?"underline":"normal",b.isOnList()){var f=["circle","disc","disc-leading-zero","square"],g=a.inArray(e["list-style-type"],f)>-1;e["list-style"]=g?"unordered":"ordered"}else e["list-style"]="none";var i=h.ancestor(b.sc,h.isPara);if(i&&i.style["line-height"])e["line-height"]=i.style.lineHeight;else{var j=parseInt(e["line-height"])/parseInt(e["font-size"]);e["line-height"]=j.toFixed(1)}return e.image=h.isImg(c)&&c,e.anchor=b.isOnAnchor()&&h.ancestor(b.sc,h.isAnchor),e.aAncestor=h.listAncestor(b.sc,h.isEditable),e}},k=function(){var a=[],b=[],c=function(a){var b=a[0],c=i.create();return{contents:a.html(),bookmark:c.bookmark(b),scrollTop:a.scrollTop()}},d=function(a,b){a.html(b.contents).scrollTop(b.scrollTop),i.createFromBookmark(a[0],b.bookmark).select()};this.undo=function(e){var f=c(e);0!==a.length&&(d(e,a.pop()),b.push(f))},this.redo=function(e){var f=c(e);0!==b.length&&(d(e,b.pop()),a.push(f))},this.recordUndo=function(d){b=[],a.push(c(d))}},l=function(){this.saveRange=function(a){a.data("range",i.create())},this.restoreRange=function(a){var b=a.data("range");b&&b.select()};var b=new j;this.currentStyle=function(a){var c=i.create();return c.isOnEditable()&&b.current(c,a)},this.tab=function(b){e(b);var c=i.create(),d=new Array(b.data("tabsize")+1).join("&nbsp;");c.insertNode(a('<span id="noteTab">'+d+"</span>")[0]);var f=a("#noteTab").removeAttr("id");c=i.create(f[0],1),c.select(),h.remove(f[0])},this.undo=function(a){a.data("NoteHistory").undo(a)},this.redo=function(a){a.data("NoteHistory").redo(a)};for(var e=this.recordUndo=function(a){a.data("NoteHistory").recordUndo(a)},f=["bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertOrderedList","insertUnorderedList","indent","outdent","formatBlock","removeFormat","backColor","foreColor","insertImage","insertHorizontalRule"],g=0,k=f.length;k>g;g++)this[f[g]]=function(a){return function(b,c){e(b),document.execCommand(a,!1,c)}}(f[g]);this.formatBlock=function(a,b){e(a),b=c?"<"+b+">":b,document.execCommand("FormatBlock",!1,b)},this.fontSize=function(a,b){e(a),document.execCommand("fontSize",!1,3),d?a.find("font[size=3]").removeAttr("size").css("font-size",b+"px"):a.find("span").filter(function(){return"medium"==this.style.fontSize}).css("font-size",b+"px")},this.lineHeight=function(a,c){e(a),b.stylePara(i.create(),{lineHeight:c})},this.unlink=function(a){var b=i.create();if(b.isOnAnchor()){e(a);var c=h.ancestor(b.sc,h.isAnchor);b=i.create(c,0,c,1),b.select(),document.execCommand("unlink")}},this.setLinkDialog=function(b,d){var f=i.create();if(f.isOnAnchor()){var g=h.ancestor(f.sc,h.isAnchor);f=i.create(g,0,g,1)}d({range:f,text:f.toString(),url:f.isOnAnchor()?h.ancestor(f.sc,h.isAnchor).href:""},function(d){f.select(),e(b);var g=-1!==d.toLowerCase().indexOf("://"),h=g?d:"http://"+d;if(c&&f.isCollapsed()){f.insertNode(a('<A id="linkAnchor">'+d+"</A>")[0]);var j=a("#linkAnchor").removeAttr("id").attr("href",h);f=i.create(j[0],0,j[0],1),f.select()}else document.execCommand("createlink",!1,h)})},this.color=function(a,b){var c=JSON.parse(b),d=c.foreColor,f=c.backColor;e(a),d&&document.execCommand("foreColor",!1,d),f&&document.execCommand("backColor",!1,f)},this.insertTable=function(b,d){e(b);for(var f,g=d.split("x"),h=g[0],j=g[1],k=[],l=c?"&nbsp;":"<br/>",m=0;h>m;m++)k.push("<td>"+l+"</td>");f=k.join("");for(var n,o=[],p=0;j>p;p++)o.push("<tr>"+f+"</tr>");n=o.join("");var q='<table class="table table-bordered">'+n+"</table>";i.create().insertNode(a(q)[0])},this.floatMe=function(a,b,c){e(a),c.style.cssFloat=b},this.resize=function(a,b,c){e(a),c.style.width=a.width()*b+"px",c.style.height=""},this.resizeTo=function(a,b){var c=a.y/a.x,d=b.data("ratio");b.css({width:d>c?a.x:a.y/d,height:d>c?a.x*d:a.y})}},m=function(){this.update=function(b,c){var d=function(b,c){b.find(".dropdown-menu li a").each(function(){var b=a(this).attr("data-value")==c;this.className=b?"checked":""})},e=b.find(".note-fontsize");e.find(".note-current-fontsize").html(c["font-size"]),d(e,parseFloat(c["font-size"]));var f=b.find(".note-height");d(f,parseFloat(c["line-height"]));var g=function(a,c){var d=b.find(a);d[c()?"addClass":"removeClass"]("active")};g('button[data-event="bold"]',function(){return"bold"===c["font-bold"]}),g('button[data-event="italic"]',function(){return"italic"===c["font-italic"]}),g('button[data-event="underline"]',function(){return"underline"===c["font-underline"]}),g('button[data-event="justifyLeft"]',function(){return"left"===c["text-align"]||"start"===c["text-align"]}),g('button[data-event="justifyCenter"]',function(){return"center"===c["text-align"]}),g('button[data-event="justifyRight"]',function(){return"right"===c["text-align"]}),g('button[data-event="justifyFull"]',function(){return"justify"===c["text-align"]}),g('button[data-event="insertUnorderedList"]',function(){return"unordered"===c["list-style"]}),g('button[data-event="insertOrderedList"]',function(){return"ordered"===c["list-style"]})},this.updateRecentColor=function(b,c,d){var e=a(b).closest(".note-color"),f=e.find(".note-recent-color"),g=JSON.parse(f.attr("data-value"));g[c]=d,f.attr("data-value",JSON.stringify(g));var h="backColor"===c?"background-color":"color";f.find("i").css(h,d)},this.updateFullscreen=function(a,b){var c=a.find('button[data-event="fullscreen"]');c[b?"addClass":"removeClass"]("active")},this.updateCodeview=function(a,b){var c=a.find('button[data-event="codeview"]');c[b?"addClass":"removeClass"]("active")},this.enable=function(a){a.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.disable=function(a){a.find("button").not('button[data-event="codeview"]').addClass("disabled")}},n=function(){var b=function(b,c){var d=a(c),e=d.position(),f=d.height();b.css({display:"block",left:e.left,top:e.top+f})};this.update=function(a,c){var d=a.find(".note-link-popover"),e=a.find(".note-image-popover");if(c.anchor){var f=d.find("a");f.attr("href",c.anchor.href).html(c.anchor.href),b(d,c.anchor)}else d.hide();c.image?b(e,c.image):e.hide()},this.hide=function(a){a.children().hide()}},o=function(){this.update=function(b,c){var d=b.find(".note-control-selection");if(c.image){var e=a(c.image),f=e.position(),g={w:e.width(),h:e.height()};d.css({display:"block",left:f.left,top:f.top,width:g.w,height:g.h}).data("target",c.image);var h=g.w+"x"+g.h;d.find(".note-control-selection-info").text(h)}else d.hide()},this.hide=function(a){a.children().hide()}},p=function(){this.showImageDialog=function(b,c,d,e){var f=b.find(".note-image-dialog"),g=b.find(".note-dropzone"),h=b.find(".note-image-input"),i=b.find(".note-image-url"),j=b.find(".note-image-btn");f.on("shown.bs.modal",function(){g.on("dragenter dragover dragleave",!1),g.on("drop",function(a){c(a),f.modal("hide")}),h.on("change",function(){d(this.files),a(this).val(""),f.modal("hide")}),i.val("").keyup(function(){i.val()?j.removeClass("disabled").attr("disabled",!1):j.addClass("disabled").attr("disabled",!0)}).trigger("focus"),j.click(function(a){f.modal("hide"),e(i.val()),a.preventDefault()})}).on("hidden.bs.modal",function(){g.off("dragenter dragover dragleave drop"),h.off("change"),f.off("shown.bs.modal hidden.bs.modal"),i.off("keyup"),j.off("click")}).modal("show")},this.showLinkDialog=function(a,b,c){var d=a.find(".note-link-dialog"),e=d.find(".note-link-text"),f=d.find(".note-link-url"),g=d.find(".note-link-btn");d.on("shown.bs.modal",function(){e.html(b.text),f.val(b.url).keyup(function(){f.val()?g.removeClass("disabled").attr("disabled",!1):g.addClass("disabled").attr("disabled",!0),b.text||e.html(f.val())}).trigger("focus"),g.click(function(a){d.modal("hide"),c(f.val()),a.preventDefault()})}).on("hidden.bs.modal",function(){f.off("keyup"),g.off("click"),d.off("shown.bs.modal hidden.bs.modal")}).modal("show")},this.showHelpDialog=function(a){a.find(".note-help-dialog").modal("show")}},q=function(){var c=new l,d=new m,e=new n,f=new o,i=new p,j={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLACH:220,RIGHTBRACKET:221},k={onAutoSave:null,onImageUpload:null,onImageUploadError:null,onFileUpload:null,onFileUploadError:null},q=function(b){var c=a(b).closest(".note-editor");return{editor:function(){return c},toolbar:function(){return c.find(".note-toolbar")},editable:function(){return c.find(".note-editable")},codable:function(){return c.find(".note-codable")},statusbar:function(){return c.find(".note-statusbar")},popover:function(){return c.find(".note-popover")},handle:function(){return c.find(".note-handle")},dialog:function(){return c.find(".note-dialog")}}},r=function(a){var d=b?a.metaKey:a.ctrlKey,e=a.shiftKey,f=a.keyCode,g=d||e||f===j.TAB,h=g?q(a.target):null;if(f===j.TAB&&h.editable().data("tabsize"))c.tab(h.editable());else if(d&&(e&&f===j.Z||f===j.Y))c.redo(h.editable());else if(d&&f===j.Z)c.undo(h.editable());else if(d&&f===j.B)c.bold(h.editable());else if(d&&f===j.I)c.italic(h.editable());else if(d&&f===j.U)c.underline(h.editable());else if(d&&e&&f===j.S)c.strikethrough(h.editable());else if(d&&f===j.BACKSLACH)c.removeFormat(h.editable());else if(d&&f===j.K)c.setLinkDialog(h.editable(),function(a,b){i.showLinkDialog(h.dialog(),a,b)});else if(d&&f===j.SLASH)i.showHelpDialog(h.dialog());else if(d&&e&&f===j.L)c.justifyLeft(h.editable());else if(d&&e&&f===j.E)c.justifyCenter(h.editable());else if(d&&e&&f===j.R)c.justifyRight(h.editable());else if(d&&e&&f===j.J)c.justifyFull(h.editable());else if(d&&e&&f===j.NUM7)c.insertUnorderedList(h.editable());else if(d&&e&&f===j.NUM8)c.insertOrderedList(h.editable());else if(d&&f===j.LEFTBRACKET)c.outdent(h.editable());else if(d&&f===j.RIGHTBRACKET)c.indent(h.editable());else if(d&&f===j.NUM0)c.formatBlock(h.editable(),"P");else if(d&&j.NUM1<=f&&f<=j.NUM6){var k="H"+String.fromCharCode(f);c.formatBlock(h.editable(),k)}else{if(!d||f!==j.ENTER)return(f===j.BACKSPACE||f===j.ENTER||f===j.SPACE)&&c.recordUndo(q(a.target).editable()),void 0;c.insertHorizontalRule(h.editable())}a.preventDefault()},s=function(b,d){c.restoreRange(b),k.onImageUpload?k.onImageUpload(d,c,b):a.each(d,function(a,d){g.readFile(d).then(function(a){c.insertImage(b,a)})})},t=function(a){var b=a.originalEvent.dataTransfer;if(b&&b.files){var c=q(a.currentTarget||a.target);s(c.editable(),b.files)}a.stopPropagation(),a.preventDefault()},u=function(a){h.isImg(a.target)&&a.preventDefault()},v=function(a){var b=q(a.currentTarget||a.target),g=c.currentStyle(a.target);g&&(d.update(b.toolbar(),g),e.update(b.popover(),g),f.update(b.handle(),g))},w=function(a){var b=q(a.currentTarget||a.target);e.hide(b.popover()),f.hide(b.handle())},x=function(b){if(h.isControlSizing(b.target)){var d,g=q(b.target),i=g.handle(),j=g.popover(),k=g.editable(),l=g.editor(),m=i.find(".note-control-selection").data("target"),n=a(m),o=n.offset(),p=a(document).scrollTop();l.on("mousemove",function(a){d={x:a.clientX-o.left,y:a.clientY-(o.top-p)},c.resizeTo(d,n),f.update(i,{image:m}),e.update(j,{image:m})}).on("mouseup",function(){l.off("mousemove").off("mouseup")}),n.data("ratio")||n.data("ratio",n.height()/n.width()),c.recordUndo(k),b.stopPropagation(),b.preventDefault()}},y=function(b){var c=a(b.target).closest("[data-event]");c.length>0&&b.preventDefault()},z=function(b){var e=a(b.target).closest("[data-event]");if(e.length>0){var f,g=e.attr("data-event"),h=e.attr("data-value"),j=q(b.target),k=j.dialog(),l=j.editable(),m=j.codable();if(-1!==a.inArray(g,["resize","floatMe"])){var n=j.handle(),o=n.find(".note-control-selection");f=o.data("target")}if(c[g]&&(l.trigger("focus"),c[g](l,h,f)),-1!==a.inArray(g,["backColor","foreColor"]))d.updateRecentColor(e[0],g,h);else if("showLinkDialog"===g)c.setLinkDialog(l,function(a,b){i.showLinkDialog(k,a,b)});else if("showImageDialog"===g)i.showImageDialog(k,t,function(a){s(l,a)},function(a){c.restoreRange(l),c.insertImage(l,a)});else if("showHelpDialog"===g)i.showHelpDialog(k);else if("fullscreen"===g){var p=j.editor();p.toggleClass("fullscreen");var r=j.toolbar(),u=function(){var b=a(window).height()-r.outerHeight();l.css("height",b)},w=p.hasClass("fullscreen");w?(l.data("orgHeight",l.css("height")),a(window).resize(u).trigger("resize")):(l.css("height",l.data("orgHeight")),a(window).off("resize")),d.updateFullscreen(r,w)}else if("codeview"===g){var p=j.editor(),r=j.toolbar();p.toggleClass("codeview");var x=p.hasClass("codeview");x?(m.val(l.html()),m.height(l.height()),d.disable(r),m.focus()):(l.html(m.val()),l.height(m.height()),d.enable(r),l.focus()),d.updateCodeview(j.toolbar(),x)}v(b)}},A=24,B=function(b){var c=a(document),d=q(b.target),e=d.editable();d.codable();var f=e.offset().top-c.scrollTop(),g=function(a){e.height(a.clientY-(f+A))},h=function(){c.unbind("mousemove",g).unbind("mouseup",h)};c.mousemove(g).mouseup(h),b.stopPropagation(),b.preventDefault()},C=18,D=function(b){var c,d=a(b.target.parentNode),e=d.next(),f=d.find(".note-dimension-picker-mousecatcher"),g=d.find(".note-dimension-picker-highlighted"),h=d.find(".note-dimension-picker-unhighlighted");if(void 0===b.offsetX){var i=a(b.target).offset();c={x:b.pageX-i.left,y:b.pageY-i.top}}else c={x:b.offsetX,y:b.offsetY};var j={c:Math.ceil(c.x/C)||1,r:Math.ceil(c.y/C)||1};g.css({width:j.c+"em",height:j.r+"em"}),f.attr("data-value",j.c+"x"+j.r),3<j.c&&j.c<10&&h.css({width:j.c+1+"em"}),3<j.r&&j.r<10&&h.css({height:j.r+1+"em"}),e.html(j.c+" x "+j.r)};this.attach=function(a,b){a.editable.on("keydown",r),a.editable.on("mousedown",u),a.editable.on("keyup mouseup",v),a.editable.on("scroll",w),a.editable.on("dragenter dragover dragleave",!1),a.editable.on("drop",t),a.handle.on("mousedown",x),a.toolbar.on("click",z),a.popover.on("click",z),a.toolbar.on("mousedown",y),a.popover.on("mousedown",y),a.statusbar.on("mousedown",B);var d=a.toolbar,e=d.find(".note-dimension-picker-mousecatcher");e.on("mousemove",D),a.editable.on("blur",function(){c.saveRange(a.editable)}),b.onenter&&a.editable.keypress(function(a){a.keyCode===j.ENTER&&b.onenter(a)}),b.onfocus&&a.editable.focus(b.onfocus),b.onblur&&a.editable.blur(b.onblur),b.onkeyup&&a.editable.keyup(b.onkeyup),b.onkeydown&&a.editable.keydown(b.onkeydown),b.onImageUpload&&(k.onImageUpload=b.onImageUpload)},this.dettach=function(a){a.editable.off(),a.toolbar.off(),a.handle.off(),a.popover.off()}},r=function(){var c={picture:'<button type="button" class="btn btn-default btn-sm btn-small" title="Picture" data-event="showImageDialog" tabindex="-1"><i class="fa fa-picture-o icon-picture"></i></button>',link:'<button type="button" class="btn btn-default btn-sm btn-small" title="Link" data-event="showLinkDialog" data-shortcut="Ctrl+K" data-mac-shortcut="⌘+K" tabindex="-1"><i class="fa fa-link icon-link"></i></button>',table:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="Table" data-toggle="dropdown" tabindex="-1"><i class="fa fa-table icon-table"></i> <span class="caret"></span></button><ul class="dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>',style:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="Style" data-toggle="dropdown" tabindex="-1"><i class="fa fa-magic icon-magic"></i> <span class="caret"></span></button><ul class="dropdown-menu"><li><a data-event="formatBlock" data-value="p">Normal</a></li><li><a data-event="formatBlock" data-value="blockquote"><blockquote>Quote</blockquote></a></li><li><a data-event="formatBlock" data-value="pre">Code</a></li><li><a data-event="formatBlock" data-value="h1"><h1>Header 1</h1></a></li><li><a data-event="formatBlock" data-value="h2"><h2>Header 2</h2></a></li><li><a data-event="formatBlock" data-value="h3"><h3>Header 3</h3></a></li><li><a data-event="formatBlock" data-value="h4"><h4>Header 4</h4></a></li><li><a data-event="formatBlock" data-value="h5"><h5>Header 5</h5></a></li><li><a data-event="formatBlock" data-value="h6"><h6>Header 6</h6></a></li></ul>',fontsize:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="Font Size" tabindex="-1"><span class="note-current-fontsize">11</span> <b class="caret"></b></button><ul class="dropdown-menu"><li><a data-event="fontSize" data-value="8"><i class="fa fa-check icon-ok"></i> 8</a></li><li><a data-event="fontSize" data-value="9"><i class="fa fa-check icon-ok"></i> 9</a></li><li><a data-event="fontSize" data-value="10"><i class="fa fa-check icon-ok"></i> 10</a></li><li><a data-event="fontSize" data-value="11"><i class="fa fa-check icon-ok"></i> 11</a></li><li><a data-event="fontSize" data-value="12"><i class="fa fa-check icon-ok"></i> 12</a></li><li><a data-event="fontSize" data-value="14"><i class="fa fa-check icon-ok"></i> 14</a></li><li><a data-event="fontSize" data-value="18"><i class="fa fa-check icon-ok"></i> 18</a></li><li><a data-event="fontSize" data-value="24"><i class="fa fa-check icon-ok"></i> 24</a></li><li><a data-event="fontSize" data-value="36"><i class="fa fa-check icon-ok"></i> 36</a></li></ul>',color:'<button type="button" class="btn btn-default btn-sm btn-small note-recent-color" title="Recent Color" data-event="color" data-value=\'{"backColor":"yellow"}\' tabindex="-1"><i class="fa fa-font icon-font" style="color:black;background-color:yellow;"></i></button><button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="More Color" data-toggle="dropdown" tabindex="-1"><span class="caret"></span></button><ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">BackColor</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="Transparent">Set transparent</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">FontColor</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="Reset">Reset to default</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>',bold:'<button type="button" class="btn btn-default btn-sm btn-small" title="Bold" data-shortcut="Ctrl+B" data-mac-shortcut="⌘+B" data-event="bold" tabindex="-1"><i class="fa fa-bold icon-bold"></i></button>',italic:'<button type="button" class="btn btn-default btn-sm btn-small" title="Italic" data-shortcut="Ctrl+I" data-mac-shortcut="⌘+I" data-event="italic" tabindex="-1"><i class="fa fa-italic icon-italic"></i></button>',underline:'<button type="button" class="btn btn-default btn-sm btn-small" title="Underline" data-shortcut="Ctrl+U" data-mac-shortcut="⌘+U" data-event="underline" tabindex="-1"><i class="fa fa-underline icon-underline"></i></button>',clear:'<button type="button" class="btn btn-default btn-sm btn-small" title="Remove Font Style" data-shortcut="Ctrl+\\" data-mac-shortcut="⌘+\\" data-event="removeFormat" tabindex="-1"><i class="fa fa-eraser icon-eraser"></i></button>',ul:'<button type="button" class="btn btn-default btn-sm btn-small" title="Unordered list" data-shortcut="Ctrl+Shift+8" data-mac-shortcut="⌘+⇧+7" data-event="insertUnorderedList" tabindex="-1"><i class="fa fa-list-ul icon-list-ul"></i></button>',ol:'<button type="button" class="btn btn-default btn-sm btn-small" title="Ordered list" data-shortcut="Ctrl+Shift+7" data-mac-shortcut="⌘+⇧+8" data-event="insertOrderedList" tabindex="-1"><i class="fa fa-list-ol icon-list-ol"></i></button>',paragraph:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="Paragraph" data-toggle="dropdown" tabindex="-1"><i class="fa fa-align-left icon-align-left"></i>  <span class="caret"></span></button><ul class="dropdown-menu"><li><div class="note-align btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Align left" data-shortcut="Ctrl+Shift+L" data-mac-shortcut="⌘+⇧+L" data-event="justifyLeft" tabindex="-1"><i class="fa fa-align-left icon-align-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Align center" data-shortcut="Ctrl+Shift+E" data-mac-shortcut="⌘+⇧+E" data-event="justifyCenter" tabindex="-1"><i class="fa fa-align-center icon-align-center"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Align right" data-shortcut="Ctrl+Shift+R" data-mac-shortcut="⌘+⇧+R" data-event="justifyRight" tabindex="-1"><i class="fa fa-align-right icon-align-right"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Justify full" data-shortcut="Ctrl+Shift+J" data-mac-shortcut="⌘+⇧+J" data-event="justifyFull" tabindex="-1"><i class="fa fa-align-justify icon-align-justify"></i></button></div></li><li><div class="note-list btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Outdent" data-shortcut="Ctrl+[" data-mac-shortcut="⌘+[" data-event="outdent" tabindex="-1"><i class="fa fa-outdent icon-indent-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Indent" data-shortcut="Ctrl+]" data-mac-shortcut="⌘+]" data-event="indent" tabindex="-1"><i class="fa fa-indent icon-indent-right"></i></button></li></ul>',height:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="Line Height" tabindex="-1"><i class="fa fa-text-height icon-text-height"></i>&nbsp; <b class="caret"></b></button><ul class="dropdown-menu"><li><a data-event="lineHeight" data-value="1.0"><i class="fa fa-check icon-ok"></i> 1.0</a></li><li><a data-event="lineHeight" data-value="1.2"><i class="fa fa-check icon-ok"></i> 1.2</a></li><li><a data-event="lineHeight" data-value="1.4"><i class="fa fa-check icon-ok"></i> 1.4</a></li><li><a data-event="lineHeight" data-value="1.5"><i class="fa fa-check icon-ok"></i> 1.5</a></li><li><a data-event="lineHeight" data-value="1.6"><i class="fa fa-check icon-ok"></i> 1.6</a></li><li><a data-event="lineHeight" data-value="1.8"><i class="fa fa-check icon-ok"></i> 1.8</a></li><li><a data-event="lineHeight" data-value="2.0"><i class="fa fa-check icon-ok"></i> 2.0</a></li><li><a data-event="lineHeight" data-value="3.0"><i class="fa fa-check icon-ok"></i> 3.0</a></li></ul>',help:'<button type="button" class="btn btn-default btn-sm btn-small" title="Help" data-shortcut="Ctrl+/" data-mac-shortcut="⌘+/" data-event="showHelpDialog" tabindex="-1"><i class="fa fa-question icon-question"></i></button>',fullscreen:'<button type="button" class="btn btn-default btn-sm btn-small" title="Full Screen" data-event="fullscreen" tabindex="-1"><i class="fa fa-arrows-alt icon-fullscreen"></i></button>',codeview:'<button type="button" class="btn btn-default btn-sm btn-small" title="Code View" data-event="codeview" tabindex="-1"><i class="fa fa-code icon-code"></i></button>'},d='<div class="note-popover"><div class="note-link-popover popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content note-link-content"><a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Edit" data-event="showLinkDialog" tabindex="-1"><i class="fa fa-edit icon-edit"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Unlink" data-event="unlink" tabindex="-1"><i class="fa fa-unlink icon-unlink"></i></button></div></div></div><div class="note-image-popover popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content note-image-content"><div class="btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Resize Full" data-event="resize" data-value="1" tabindex="-1"><i class="fa fa-resize-full icon-resize-full"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Resize Half" data-event="resize" data-value="0.5" tabindex="-1">½</button><button type="button" class="btn btn-default btn-sm btn-small" title="Resize Thrid" data-event="resize" data-value="0.33" tabindex="-1">⅓</button><button type="button" class="btn btn-default btn-sm btn-small" title="Resize Quarter" data-event="resize" data-value="0.25" tabindex="-1">¼</button></div><div class="btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Float Left" data-event="floatMe" data-value="left" tabindex="-1"><i class="fa fa-align-left icon-align-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Float Right" data-event="floatMe" data-value="right" tabindex="-1"><i class="fa fa-align-right icon-align-right"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Float None" data-event="floatMe" data-value="none" tabindex="-1"><i class="fa fa-reorder icon-reorder"></i></button></div></div></div></div>',e='<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>',f='<table class="note-shortcut"><thead><tr><th></th><th>Text formatting</th></tr></thead><tbody><tr><td>⌘ + B</td><td>Toggle Bold</td></tr><tr><td>⌘ + I</td><td>Toggle Italic</td></tr><tr><td>⌘ + U</td><td>Toggle Underline</td></tr><tr><td>⌘ + ⇧ + S</td><td>Toggle Strike</td></tr><tr><td>⌘ + \\</td><td>Remove Font Style</td></tr></tr></tbody></table>',g='<table class="note-shortcut"><thead><tr><th></th><th>Action</th></tr></thead><tbody><tr><td>⌘ + Z</td><td>Undo</td></tr><tr><td>⌘ + ⇧ + Z</td><td>Redo</td></tr><tr><td>⌘ + ]</td><td>Indent</td></tr><tr><td>⌘ + [</td><td>Outdent</td></tr><tr><td>⌘ + K</td><td>Insert Link</td></tr><tr><td>⌘ + ENTER</td><td>Insert Horizontal Rule</td></tr></tbody></table>',i='<table class="note-shortcut"><thead><tr><th></th><th>Paragraph formatting</th></tr></thead><tbody><tr><td>⌘ + ⇧ + L</td><td>Align Left</td></tr><tr><td>⌘ + ⇧ + E</td><td>Align Center</td></tr><tr><td>⌘ + ⇧ + R</td><td>Align Right</td></tr><tr><td>⌘ + ⇧ + J</td><td>Justify Full</td></tr><tr><td>⌘ + ⇧ + NUM7</td><td>Ordered List</td></tr><tr><td>⌘ + ⇧ + NUM8</td><td>Unordered List</td></tr></tbody></table>',j='<table class="note-shortcut"><thead><tr><th></th><th>Document Style</th></tr></thead><tbody><tr><td>⌘ + NUM0</td><td>Normal Text</td></tr><tr><td>⌘ + NUM1</td><td>Heading 1</td></tr><tr><td>⌘ + NUM2</td><td>Heading 2</td></tr><tr><td>⌘ + NUM3</td><td>Heading 3</td></tr><tr><td>⌘ + NUM4</td><td>Heading 4</td></tr><tr><td>⌘ + NUM5</td><td>Heading 5</td></tr><tr><td>⌘ + NUM6</td><td>Heading 6</td></tr></tbody></table>',l='<table class="note-shortcut-layout"><tbody><tr><td>'+g+"</td><td>"+f+"</td></tr>"+"<tr><td>"+j+"</td><td>"+i+"</td></tr>"+"</tbody>"+"</table>";
b||(l=l.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift"));var m='<div class="note-dialog"><div class="note-image-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">×</button><h4>Insert Image</h4></div><div class="modal-body"><div class="row-fluid"><div class="note-dropzone span12">Drag an image here</div><h5>Select from files</h5><input class="note-image-input" type="file" name="files" accept="image/*" capture="camera" /><h5>Image URL</h5><input class="note-image-url form-control span12" type="text" /></div></div><div class="modal-footer"><button href="#" class="btn btn-primary note-image-btn disabled" disabled="disabled">Insert</button></div></div></div></div><div class="note-link-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">×</button><h4>Edit Link</h4></div><div class="modal-body"><div class="row-fluid"><div class="form-group"><label>Text to display</label><span class="note-link-text form-control input-xlarge uneditable-input" /></div><div class="form-group"><label>To what URL should this link go?</label><input class="note-link-url form-control span12" type="text" /></div></div></div><div class="modal-footer"><button href="#" class="btn btn-primary note-link-btn disabled" disabled="disabled">Link</button></div></div></div></div><div class="note-help-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><div class="modal-background"><a class="modal-close pull-right" aria-hidden="true" tabindex="-1">Close</a><div class="title">Keyboard shortcuts</div>'+l+'<p class="text-center"><a href="//hackerwins.github.io/summernote/" target="_blank">Summernote v0.4</a> · <a href="//github.com/HackerWins/summernote" target="_blank">Project</a> · <a href="//github.com/HackerWins/summernote/issues" target="_blank">Issues</a></p>'+"</div>"+"</div>"+"</div>"+"</div>"+"</div>",n=function(c,d){c.find("button").each(function(c,d){var e=a(d),f=e.attr(b?"data-mac-shortcut":"data-shortcut");f&&e.attr("title",function(a,b){return b+" ("+f+")"})}).tooltip({container:"body",placement:d||"top"})},o=[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],p=function(b){b.find(".note-color-palette").each(function(){for(var b=a(this),c=b.attr("data-target-event"),d="",e=0,f=o.length;f>e;e++){for(var g=o[e],h="<div>",i=0,j=g.length;j>i;i++){var k=g[i],l=['<button type="button" class="note-color-btn" style="background-color:',k,';" data-event="',c,'" data-value="',k,'" title="',k,'" data-toggle="button" tabindex="-1"></button>'].join("");h+=l}h+="</div>",d+=h}b.html(d)})};this.createLayout=function(b,f,g,i){if(!b.next().hasClass("note-editor")){var j=a('<div class="note-editor"></div>');f>0&&a('<div class="note-statusbar"><div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div></div>').prependTo(j);var l=a('<div class="note-editable" contentEditable="true"></div>').prependTo(j);f&&l.height(f),g&&l.data("tabsize",g),l.html(h.html(b)),l.data("NoteHistory",new k),a('<textarea class="note-codable"></textarea>').prependTo(j),setTimeout(function(){document.execCommand("styleWithCSS",0,!0)});for(var o="",q=0,r=i.length;r>q;q++){var s=i[q];o+='<div class="note-'+s[0]+' btn-group">';for(var t=0,u=s[1].length;u>t;t++)o+=c[s[1][t]];o+="</div>"}o='<div class="note-toolbar btn-toolbar">'+o+"</div>";var v=a(o).prependTo(j);p(v),n(v,"bottom");var w=a(d).prependTo(j);n(w),a(e).prependTo(j);var x=a(m).prependTo(j);x.find("button.close, a.modal-close").click(function(){a(this).closest(".modal").modal("hide")}),j.insertAfter(b),b.hide()}};var q=this.layoutInfoFromHolder=function(a){var b=a.next();if(b.hasClass("note-editor"))return{editor:b,toolbar:b.find(".note-toolbar"),editable:b.find(".note-editable"),codable:b.find(".note-codable"),statusbar:b.find(".note-statusbar"),popover:b.find(".note-popover"),handle:b.find(".note-handle"),dialog:b.find(".note-dialog")}};this.removeLayout=function(a){var b=q(a);b&&(a.html(b.editable.html()),b.editor.remove(),a.show())}},s=new r,t=new q;a.fn.extend({summernote:function(b){if(b=a.extend({toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture"]],["view",["fullscreen","codeview"]],["help",["help"]]]},b),this.each(function(c,d){var e=a(d);s.createLayout(e,b.height,b.tabsize,b.toolbar);var f=s.layoutInfoFromHolder(e);t.attach(f,b)}),this.first()&&b.focus){var c=s.layoutInfoFromHolder(this.first());c.editable.focus()}this.length>0&&b.oninit&&b.oninit()},code:function(b){if(void 0===b){var c=this.first();if(0===c.length)return;var d=s.layoutInfoFromHolder(c);if(d&&d.editable){var e=d.editor.hasClass("codeview");return e?d.codable.val():d.editable.html()}return c.html()}this.each(function(c,d){var e=s.layoutInfoFromHolder(a(d));e&&e.editable&&e.editable.html(b)})},destroy:function(){this.each(function(b,c){var d=a(c),e=s.layoutInfoFromHolder(d);e&&e.editable&&(t.dettach(e),s.removeLayout(d))})},summernoteInner:function(){return{dom:h,list:f,func:e,range:i}}})}(window.jQuery),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){"use strict";var c,d,e=this.length>>>0,f=!1;for(1<arguments.length&&(d=b,f=!0),c=0;e>c;++c)this.hasOwnProperty(c)&&(f?d=a(d,this[c],c,this):(d=this[c],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return d});